<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>戦国覇道（修正完全版）</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <header>
            <h1>戦国覇道</h1>
            <div id="global-status">
                <span id="date-display">開始前</span>
                <div class="header-controls">
                    <button onclick="window.GameApp.saveGame()">保存</button>
                    <button onclick="window.GameApp.loadGame()">読込</button>
                </div>
            </div>
        </header>

        <main id="main-view">
            <div id="map-scroll-area">
                <div id="map-container"></div>
            </div>

            <div id="control-panel" class="panel hidden">
                <div class="panel-header">
                    <h2 id="panel-title">城名</h2>
                    <span id="panel-clan" class="clan-badge">--</span>
                </div>
                
                <div class="resource-grid">
                    <div class="res-item">
                        <span class="res-label">金</span>
                        <span class="res-value" id="panel-gold">0</span>
                    </div>
                    <div class="res-item">
                        <span class="res-label">兵糧</span>
                        <span class="res-value" id="panel-rice">0</span>
                    </div>
                    <div class="res-item">
                        <span class="res-label">兵士</span>
                        <span class="res-value" id="panel-soldiers">0</span>
                    </div>
                    <div class="res-item">
                        <span class="res-label">防御</span>
                        <span class="res-value" id="panel-defense">0</span>
                    </div>
                    <div class="res-item">
                        <span class="res-label">石高</span>
                        <span class="res-value" id="panel-kokudaka">0</span>
                    </div>
                    <div class="res-item">
                        <span class="res-label">商業</span>
                        <span class="res-value" id="panel-commerce">0</span>
                    </div>
                </div>

                <hr>

                <div id="command-area"></div>
                
                <div id="panel-message" class="panel-msg"></div>
            </div>
        </main>

        <div id="log-window">
            <h3>履歴</h3>
            <div id="log-content"></div>
        </div>

        <div id="start-screen" class="modal">
            <div class="modal-content start-content">
                <h2>大名家選択</h2>
                <p>天下統一を目指す大名家を選んでください</p>
                <div id="clan-selector"></div>
            </div>
        </div>

        <div id="selector-modal" class="modal hidden">
            <div class="modal-content selector-content">
                <h2 id="selector-title">選択</h2>
                <div id="selector-list"></div>
                <div class="selector-actions">
                    <button id="selector-confirm-btn" class="btn-primary">決定</button>
                    <button onclick="window.GameApp.ui.closeSelector()" class="btn-secondary">戻る</button>
                </div>
            </div>
        </div>

        <div id="busho-detail-modal" class="modal hidden">
            <div class="modal-content detail-content">
                <h2>詳細</h2>
                <div id="busho-detail-body"></div>
                <div class="modal-footer">
                    <button onclick="document.getElementById('busho-detail-modal').classList.add('hidden')" class="btn-secondary">閉じる</button>
                </div>
            </div>
        </div>

        <div id="war-modal" class="modal hidden">
            <div class="modal-content war-content">
                <h2>合戦</h2>
                <div class="war-status-board">
                    <div class="army-box attacker">
                        <h3 class="army-title">攻撃軍: <span id="war-atk-name"></span></h3>
                        <div class="army-stats">
                            <div>大将: <span id="war-atk-busho"></span></div>
                            <div>兵士: <span id="war-atk-soldier" class="highlight-val"></span></div>
                        </div>
                    </div>
                    <div class="vs-badge">VS</div>
                    <div class="army-box defender">
                        <h3 class="army-title">守備軍: <span id="war-def-name"></span></h3>
                        <div class="army-stats">
                            <div>大将: <span id="war-def-busho"></span></div>
                            <div>兵士: <span id="war-def-soldier" class="highlight-val"></span></div>
                            <div>城防御: <span id="war-def-wall" class="highlight-val"></span></div>
                        </div>
                    </div>
                </div>
                <div class="war-info-bar">
                    R: <span id="war-round">1</span>/10 | 手番: <span id="war-turn-actor">--</span>
                </div>
                <div id="war-log"></div>
                <div id="war-controls" class="disabled-area">
                    <button onclick="window.GameApp.execWarCmd('bow')">弓攻撃</button>
                    <button onclick="window.GameApp.execWarCmd('siege')">城攻め</button>
                    <button onclick="window.GameApp.execWarCmd('charge')">力攻め</button>
                    <button onclick="window.GameApp.execWarCmd('scheme')">計略</button>
                    <button onclick="window.GameApp.execWarCmd('retreat')" class="btn-danger">撤退</button>
                </div>
            </div>
        </div>
    </div>
    <script src="game.js"></script>
</body>
</html>